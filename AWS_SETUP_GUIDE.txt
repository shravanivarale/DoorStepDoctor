================================================================================
  COMPLETE AWS SETUP GUIDE - AI TRIAGE ENGINE
  Step-by-Step Instructions for Deployment
================================================================================

This guide will walk you through every step needed to deploy the AI Triage 
Engine to AWS. Follow each step carefully and save all IDs and keys as you go.

================================================================================
PART 1: AWS ACCOUNT SETUP
================================================================================

STEP 1: Create AWS Account (if you don't have one)
---------------------------------------------------
1. Go to: https://aws.amazon.com/
2. Click "Create an AWS Account" (top right)
3. Enter your email address
4. Choose "Personal" account type
5. Fill in your contact information
6. Enter payment information (credit/debit card)
   Note: You won't be charged unless you exceed free tier limits
7. Verify your phone number
8. Choose "Basic Support - Free" plan
9. Complete sign-up

STEP 2: Sign in to AWS Console
-------------------------------
1. Go to: https://console.aws.amazon.com/
2. Sign in with your email and password
3. You should see the AWS Management Console dashboard

STEP 3: Set Up Billing Alerts (Important!)
-------------------------------------------
1. In AWS Console, click your account name (top right)
2. Click "Billing and Cost Management"
3. In left sidebar, click "Budgets"
4. Click "Create budget"
5. Choose "Cost budget"
6. Set budget name: "Monthly-Budget"
7. Set amount: $100 (or your preferred limit)
8. Click "Configure alerts"
9. Add alert thresholds:
   - Alert 1: 30% of budget ($30)
   - Alert 2: 60% of budget ($60)
   - Alert 3: 90% of budget ($90)
10. Enter your email for notifications
11. Click "Create budget"

STEP 4: Create IAM User (For Security)
---------------------------------------
1. In AWS Console search bar, type "IAM" and press Enter
2. Click "Users" in left sidebar
3. Click "Create user"
4. Enter username: "asha-triage-admin"
5. Check "Provide user access to the AWS Management Console"
6. Choose "I want to create an IAM user"
7. Choose "Custom password" and enter a strong password
8. Uncheck "Users must create a new password at next sign-in"
9. Click "Next"
10. Click "Attach policies directly"
11. Search and select these policies:
    - AdministratorAccess (for full access)
    OR for more security, select these specific policies:
    - AmazonBedrockFullAccess
    - AmazonCognitoPowerUser
    - AWSLambda_FullAccess
    - AmazonDynamoDBFullAccess
    - AmazonAPIGatewayAdministrator
    - CloudWatchFullAccess
    - IAMFullAccess
    - AmazonS3FullAccess
12. Click "Next"
13. Click "Create user"
14. IMPORTANT: Save the console sign-in URL shown on the success page

STEP 5: Create Access Keys for CLI
-----------------------------------
1. Click on the user you just created (asha-triage-admin)
2. Click "Security credentials" tab
3. Scroll down to "Access keys" section
4. Click "Create access key"
5. Choose "Command Line Interface (CLI)"
6. Check the confirmation box
7. Click "Next"
8. Add description: "ASHA Triage Deployment"
9. Click "Create access key"
10. CRITICAL: Copy and save these values immediately:
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SAVE THESE VALUES - YOU WON'T SEE THEM AGAIN!          â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ Access Key ID: AKIA...                                  â”‚
    â”‚ Secret Access Key: wJalrXUtn...                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
11. Click "Download .csv file" as backup
12. Click "Done"

================================================================================
PART 2: INSTALL REQUIRED TOOLS
================================================================================

STEP 6: Install AWS CLI
------------------------
1. Download AWS CLI for Windows:
   https://awscli.amazonaws.com/AWSCLIV2.msi
2. Run the installer
3. Follow installation wizard (use default settings)
4. Open Command Prompt (cmd) or PowerShell
5. Verify installation:
   
   aws --version
   
   Should show: aws-cli/2.x.x ...

STEP 7: Configure AWS CLI
--------------------------
1. Open Command Prompt or PowerShell
2. Run:
   
   aws configure
   
3. Enter the values you saved in Step 5:
   
   AWS Access Key ID [None]: PASTE_YOUR_ACCESS_KEY_ID
   AWS Secret Access Key [None]: PASTE_YOUR_SECRET_ACCESS_KEY
   Default region name [None]: us-east-1
   Default output format [None]: json
   
4. Verify configuration:
   
   aws sts get-caller-identity
   
   Should show your account information

STEP 8: Install AWS SAM CLI
----------------------------
1. Download AWS SAM CLI for Windows:
   https://github.com/aws/aws-sam-cli/releases/latest/download/AWS_SAM_CLI_64_PY3.msi
2. Run the installer
3. Follow installation wizard (use default settings)
4. Open NEW Command Prompt (important: new window)
5. Verify installation:
   
   sam --version
   
   Should show: SAM CLI, version 1.x.x

STEP 9: Verify Node.js Installation
------------------------------------
1. Open Command Prompt
2. Check Node.js version:
   
   node --version
   
   Should show: v20.x.x or higher
   
3. If not installed or version is lower:
   - Download from: https://nodejs.org/
   - Install LTS version (20.x)
   - Restart Command Prompt
   - Verify again

================================================================================
PART 3: AWS BEDROCK SETUP
================================================================================

STEP 10: Enable Amazon Bedrock Access
--------------------------------------
1. In AWS Console search bar, type "Bedrock" and press Enter
2. Click "Amazon Bedrock"
3. If you see a welcome screen, click "Get started"
4. In left sidebar, click "Model access"
5. Click "Manage model access" (orange button, top right)
6. Find "Anthropic" section
7. Check the box next to "Claude 3 Haiku"
8. Scroll down and click "Request model access"
9. Wait 2-5 minutes for approval (usually instant)
10. Refresh the page - status should show "Access granted"

STEP 11: Create S3 Bucket for Knowledge Base
---------------------------------------------
1. In AWS Console search bar, type "S3" and press Enter
2. Click "Create bucket"
3. Enter bucket name: "asha-triage-kb-docs-YOURNAME"
   (Replace YOURNAME with something unique, e.g., your initials)
4. Region: us-east-1 (US East N. Virginia)
5. Keep all other settings as default
6. Scroll down and click "Create bucket"
7. Click on your newly created bucket name
8. Click "Upload"
9. Click "Add files"
10. Navigate to your project folder:
    doorstep-doctor/backend/knowledge-base/
11. Select both files:
    - fever-protocol.md
    - maternal-health-protocol.md
12. Click "Upload"
13. Wait for upload to complete
14. Click "Close"

STEP 12: Create Bedrock Knowledge Base
---------------------------------------
1. In AWS Console, go back to Amazon Bedrock
2. In left sidebar, click "Knowledge bases"
3. Click "Create knowledge base"
4. Configuration:
   
   Knowledge base details:
   - Name: asha-triage-kb
   - Description: Medical triage protocols for rural India
   - IAM permissions: Create and use a new service role
   
5. Click "Next"

6. Data source configuration:
   - Data source name: medical-protocols
   - S3 URI: Click "Browse S3"
     â†’ Select your bucket (asha-triage-kb-docs-YOURNAME)
     â†’ Click "Choose"
   
7. Click "Next"

8. Embeddings model:
   - Select: Titan Embeddings G1 - Text
   
9. Vector database:
   - Select: Quick create a new vector store
   
10. Click "Next"

11. Review all settings

12. Click "Create knowledge base"

13. Wait 5-10 minutes for creation (status will show "Creating...")

14. Once status shows "Available", click on the knowledge base name

15. CRITICAL: Copy and save the Knowledge Base ID:
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Knowledge Base ID: XXXXXXXXXX                           â”‚
    â”‚ (Looks like: ABCDEFGHIJ)                                â”‚
    â”‚                                                          â”‚
    â”‚ SAVE THIS - YOU'LL NEED IT LATER!                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

16. Click "Data sources" tab
17. Select your data source
18. Click "Sync" to ingest documents
19. Wait for sync to complete (2-3 minutes)

STEP 13: Create Bedrock Guardrails (Optional but Recommended)
--------------------------------------------------------------
1. In Amazon Bedrock console, click "Guardrails" in left sidebar
2. Click "Create guardrail"
3. Guardrail details:
   - Name: asha-triage-guardrails
   - Description: Safety guardrails for medical triage
4. Click "Next"

5. Content filters:
   - Hate: Medium
   - Insults: Medium
   - Sexual: High
   - Violence: Medium
   - Misconduct: High
   - Prompt attacks: High
   
6. Click "Next"

7. Denied topics (click "Add topic" for each):
   
   Topic 1:
   - Name: Medication Dosage
   - Definition: Specific medication dosages or prescriptions
   
   Topic 2:
   - Name: Medical Diagnosis
   - Definition: Definitive medical diagnoses
   
   Topic 3:
   - Name: Treatment Plans
   - Definition: Specific treatment plans or medical procedures
   
8. Click "Next"

9. Word filters: Skip (click "Next")

10. Sensitive information filters: Skip (click "Next")

11. Review settings

12. Click "Create guardrail"

13. CRITICAL: Copy and save the Guardrail ID and Version:
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Guardrail ID: XXXXXXXXXX                                â”‚
    â”‚ Version: DRAFT (or 1)                                   â”‚
    â”‚                                                          â”‚
    â”‚ SAVE THESE - YOU'LL NEED THEM LATER!                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
PART 4: AMAZON COGNITO SETUP
================================================================================

STEP 14: Create Cognito User Pool
----------------------------------
1. In AWS Console search bar, type "Cognito" and press Enter
2. Click "Create user pool"

3. Step 1 - Configure sign-in experience:
   - Provider types: Select "Cognito user pool"
   - Cognito user pool sign-in options:
     â†’ Check "Email"
     â†’ Check "Phone number"
   - User name requirements: Keep defaults
   - Click "Next"

4. Step 2 - Configure security requirements:
   - Password policy: Select "Cognito defaults"
   - Multi-factor authentication: Select "Optional MFA"
   - MFA methods: Check "Authenticator apps"
   - User account recovery: Select "Email only"
   - Click "Next"

5. Step 3 - Configure sign-up experience:
   - Self-service sign-up: Enable
   - Attribute verification: Select "Send email message, verify email address"
   - Required attributes: Select these:
     â†’ email
     â†’ phone_number
     â†’ name
   - Custom attributes: Click "Add custom attribute" for each:
     
     Attribute 1:
     - Name: role
     - Type: String
     - Min length: 1
     - Max length: 50
     
     Attribute 2:
     - Name: district
     - Type: String
     - Min length: 1
     - Max length: 100
     
     Attribute 3:
     - Name: state
     - Type: String
     - Min length: 1
     - Max length: 100
     
     Attribute 4:
     - Name: assigned_phc
     - Type: String
     - Min length: 0
     - Max length: 100
     - Mutable: Yes
   
   - Click "Next"

6. Step 4 - Configure message delivery:
   - Email provider: Select "Send email with Cognito"
   - FROM email address: Keep default
   - Click "Next"

7. Step 5 - Integrate your app:
   - User pool name: asha-triage-users
   - Hosted authentication pages: Don't select
   - Domain: Skip
   - Initial app client:
     â†’ App client name: asha-triage-client
     â†’ Client secret: Don't generate
     â†’ Authentication flows: Check these:
       * ALLOW_USER_PASSWORD_AUTH
       * ALLOW_REFRESH_TOKEN_AUTH
       * ALLOW_USER_SRP_AUTH
   - Click "Next"

8. Step 6 - Review and create:
   - Review all settings
   - Click "Create user pool"

9. CRITICAL: On the success page, copy and save:
   
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ User Pool ID: us-east-1_XXXXXXXXX                       â”‚
   â”‚                                                          â”‚
   â”‚ SAVE THIS - YOU'LL NEED IT LATER!                       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

10. Click on your user pool name to open it

11. Click "App integration" tab

12. Scroll down to "App clients and analytics"

13. Click on your app client name (asha-triage-client)

14. CRITICAL: Copy and save the Client ID:
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Client ID: XXXXXXXXXXXXXXXXXXXXXXXXXX                   â”‚
    â”‚                                                          â”‚
    â”‚ SAVE THIS - YOU'LL NEED IT LATER!                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
PART 5: CONFIGURE ENVIRONMENT VARIABLES
================================================================================

STEP 15: Create Environment Configuration File
-----------------------------------------------
1. Open your project folder in File Explorer:
   doorstep-doctor/backend/

2. Create a new file named: .env
   (Note: starts with a dot)

3. Open the file in Notepad or your code editor

4. Copy and paste this template:

# AWS Configuration
AWS_REGION=us-east-1

# Amazon Bedrock
BEDROCK_MODEL_ID=anthropic.claude-3-haiku-20240307-v1:0
BEDROCK_KB_ID=PASTE_YOUR_KNOWLEDGE_BASE_ID_HERE
BEDROCK_GUARDRAIL_ID=PASTE_YOUR_GUARDRAIL_ID_HERE
BEDROCK_GUARDRAIL_VERSION=DRAFT
BEDROCK_MAX_TOKENS=400
BEDROCK_TEMPERATURE=0.2
BEDROCK_TOP_P=0.9

# DynamoDB Tables (will be created automatically)
DYNAMODB_TRIAGE_TABLE=asha-triage-records
DYNAMODB_USER_TABLE=asha-users
DYNAMODB_ANALYTICS_TABLE=asha-analytics
DYNAMODB_EMERGENCY_TABLE=asha-emergency-cases

# Amazon Cognito
COGNITO_USER_POOL_ID=PASTE_YOUR_USER_POOL_ID_HERE
COGNITO_CLIENT_ID=PASTE_YOUR_CLIENT_ID_HERE
COGNITO_REGION=us-east-1

# Amazon Transcribe
TRANSCRIBE_LANGUAGE_CODE=hi-IN
TRANSCRIBE_SAMPLE_RATE=16000
TRANSCRIBE_MEDIA_FORMAT=wav

# Amazon Polly
POLLY_VOICE_ID=Aditi
POLLY_ENGINE=neural
POLLY_OUTPUT_FORMAT=mp3

# S3 Storage
S3_BUCKET_NAME=asha-triage-storage

# CloudWatch
CLOUDWATCH_LOG_GROUP=/aws/lambda/asha-triage
CLOUDWATCH_METRICS_NAMESPACE=ASHA-Triage

# Application Settings
ENVIRONMENT=development
TEST_MODE=false
ENABLE_DETAILED_LOGGING=true
SESSION_TIMEOUT_MINUTES=30
MAX_RETRIES=3

# Cost Optimization
TARGET_COST_PER_TRIAGE=2.0
ENABLE_COST_TRACKING=true

# Performance Targets
TARGET_RESPONSE_TIME_MS=2000
MAX_CONCURRENT_REQUESTS=100

# Emergency Escalation
PHC_NOTIFICATION_ENABLED=true
EMERGENCY_CONTACT_NUMBER=108
AUTO_ESCALATION_THRESHOLD=0.8

5. NOW REPLACE THE PLACEHOLDER VALUES:
   
   Find this line:
   BEDROCK_KB_ID=PASTE_YOUR_KNOWLEDGE_BASE_ID_HERE
   
   Replace with your actual Knowledge Base ID from Step 12:
   BEDROCK_KB_ID=ABCDEFGHIJ
   
   Find this line:
   BEDROCK_GUARDRAIL_ID=PASTE_YOUR_GUARDRAIL_ID_HERE
   
   Replace with your actual Guardrail ID from Step 13:
   BEDROCK_GUARDRAIL_ID=XXXXXXXXXX
   
   Find this line:
   COGNITO_USER_POOL_ID=PASTE_YOUR_USER_POOL_ID_HERE
   
   Replace with your actual User Pool ID from Step 14:
   COGNITO_USER_POOL_ID=us-east-1_XXXXXXXXX
   
   Find this line:
   COGNITO_CLIENT_ID=PASTE_YOUR_CLIENT_ID_HERE
   
   Replace with your actual Client ID from Step 14:
   COGNITO_CLIENT_ID=XXXXXXXXXXXXXXXXXXXXXXXXXX

6. Save the file

7. IMPORTANT: Also set these as Windows environment variables:
   
   Open Command Prompt and run these commands (replace with your actual values):
   
   setx BEDROCK_KB_ID "YOUR_KNOWLEDGE_BASE_ID"
   setx COGNITO_USER_POOL_ID "YOUR_USER_POOL_ID"
   setx COGNITO_CLIENT_ID "YOUR_CLIENT_ID"
   setx BEDROCK_GUARDRAIL_ID "YOUR_GUARDRAIL_ID"
   
   Close and reopen Command Prompt after running these commands

================================================================================
PART 6: DEPLOY THE BACKEND
================================================================================

STEP 16: Install Project Dependencies
--------------------------------------
1. Open Command Prompt

2. Navigate to backend folder:
   
   cd path\to\your\project\doorstep-doctor\backend
   
   (Replace path\to\your\project with your actual path)

3. Install dependencies:
   
   npm install
   
   Wait for installation to complete (2-3 minutes)

4. Verify no errors in output

STEP 17: Build the TypeScript Code
-----------------------------------
1. In the same Command Prompt, run:
   
   npm run build
   
2. Wait for build to complete (30 seconds)

3. You should see a new "dist" folder created

4. Verify no errors in output

STEP 18: Deploy to AWS
-----------------------
1. In the same Command Prompt, run:
   
   npm run deploy:dev
   
2. The deployment process will:
   - Package your code
   - Upload to AWS
   - Create Lambda functions
   - Create DynamoDB tables
   - Create API Gateway
   - Set up CloudWatch monitoring
   
3. This will take 5-10 minutes

4. Watch for any errors in the output

5. When complete, you'll see output like:
   
   Successfully created/updated stack - asha-triage-dev
   
   CloudFormation outputs from deployed stack
   -----------------------------------------------
   Outputs
   -----------------------------------------------
   Key                 ApiEndpoint
   Description         API Gateway endpoint URL
   Value               https://XXXXXXXXXX.execute-api.us-east-1.amazonaws.com/development
   -----------------------------------------------

6. CRITICAL: Copy and save the API Endpoint URL:
   
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ API Endpoint:                                            â”‚
   â”‚ https://XXXXXXXXXX.execute-api.us-east-1.amazonaws.com/ â”‚
   â”‚ development                                              â”‚
   â”‚                                                          â”‚
   â”‚ SAVE THIS - YOU'LL NEED IT FOR FRONTEND!                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
PART 7: CREATE TEST USERS
================================================================================

STEP 19: Create ASHA Worker Test User
--------------------------------------
1. Open Command Prompt

2. Run this command (all on one line, replace USER_POOL_ID with yours):
   
   aws cognito-idp admin-create-user --user-pool-id YOUR_USER_POOL_ID --username asha_worker_001 --user-attributes Name=email,Value=asha001@example.com Name=phone_number,Value=+919876543210 Name=custom:role,Value=asha_worker Name=custom:district,Value=Pune Name=custom:state,Value=Maharashtra --temporary-password TempPass123!

3. You should see output with user details

4. SAVE THESE CREDENTIALS:
   
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ASHA Worker Test Account:                               â”‚
   â”‚ Username: asha_worker_001                               â”‚
   â”‚ Temporary Password: TempPass123!                        â”‚
   â”‚ Email: asha001@example.com                              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 20: Create PHC Doctor Test User
-------------------------------------
1. Run this command (all on one line, replace USER_POOL_ID with yours):
   
   aws cognito-idp admin-create-user --user-pool-id YOUR_USER_POOL_ID --username phc_doctor_001 --user-attributes Name=email,Value=doctor001@example.com Name=phone_number,Value=+919876543211 Name=custom:role,Value=phc_doctor Name=custom:district,Value=Pune Name=custom:state,Value=Maharashtra --temporary-password TempPass123!

2. You should see output with user details

3. SAVE THESE CREDENTIALS:
   
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ PHC Doctor Test Account:                                â”‚
   â”‚ Username: phc_doctor_001                                â”‚
   â”‚ Temporary Password: TempPass123!                        â”‚
   â”‚ Email: doctor001@example.com                            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 21: Set Permanent Passwords
---------------------------------
1. Run this command for ASHA worker (replace USER_POOL_ID and choose a password):
   
   aws cognito-idp admin-set-user-password --user-pool-id YOUR_USER_POOL_ID --username asha_worker_001 --password YourNewPassword123! --permanent

2. Run this command for PHC doctor (replace USER_POOL_ID and choose a password):
   
   aws cognito-idp admin-set-user-password --user-pool-id YOUR_USER_POOL_ID --username phc_doctor_001 --password YourNewPassword123! --permanent

3. SAVE YOUR NEW PASSWORDS:
   
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ASHA Worker: YourNewPassword123!                        â”‚
   â”‚ PHC Doctor: YourNewPassword123!                         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
PART 8: TEST YOUR DEPLOYMENT
================================================================================

STEP 22: Test Authentication Endpoint
--------------------------------------
1. Open Command Prompt

2. Set your API endpoint as a variable (replace with your actual endpoint):
   
   set API_ENDPOINT=https://XXXXXXXXXX.execute-api.us-east-1.amazonaws.com/development

3. Test login (replace password with your actual password):
   
   curl -X POST %API_ENDPOINT%/auth/login -H "Content-Type: application/json" -d "{\"username\":\"asha_worker_001\",\"password\":\"YourNewPassword123!\"}"

4. You should see a JSON response with a token

5. SAVE THE TOKEN from the response:
   
   Look for: "sessionToken": "eyJraWQ..."
   
   Copy the entire token value (very long string)

STEP 23: Test Triage Endpoint
------------------------------
1. Create a test file named test-triage.json with this content:
   
   {
     "userId": "test-user-123",
     "symptoms": "Patient has fever and cough for 3 days",
     "language": "hi-IN",
     "patientAge": 35,
     "patientGender": "female",
     "location": {
       "district": "Pune",
       "state": "Maharashtra"
     },
     "timestamp": "2024-01-15T10:00:00Z"
   }

2. Run this command (replace TOKEN with your actual token from Step 22):
   
   curl -X POST %API_ENDPOINT%/triage -H "Content-Type: application/json" -H "Authorization: Bearer YOUR_TOKEN_HERE" -d @test-triage.json

3. You should see a JSON response with triage results including:
   - urgencyLevel
   - riskScore
   - recommendedAction
   - referToPhc
   - confidenceScore

4. If you see this response, YOUR BACKEND IS WORKING! ğŸ‰

================================================================================
PART 9: VERIFY AWS RESOURCES
================================================================================

STEP 24: Check Created Resources
---------------------------------
1. Go to AWS Console

2. Check Lambda Functions:
   - Search for "Lambda"
   - You should see 6 functions:
     * asha-triage-dev-triage
     * asha-triage-dev-login
     * asha-triage-dev-register
     * asha-triage-dev-voice-stt
     * asha-triage-dev-voice-tts
     * asha-triage-dev-emergency

3. Check DynamoDB Tables:
   - Search for "DynamoDB"
   - Click "Tables"
   - You should see 3 tables:
     * asha-triage-dev-triage-records
     * asha-triage-dev-emergency-cases
     * asha-triage-dev-analytics

4. Check API Gateway:
   - Search for "API Gateway"
   - You should see: asha-triage-dev-api

5. Check CloudWatch Logs:
   - Search for "CloudWatch"
   - Click "Log groups"
   - You should see logs for each Lambda function

================================================================================
PART 10: SAVE ALL YOUR CONFIGURATION
================================================================================

STEP 25: Create Configuration Summary Document
-----------------------------------------------
Create a file named MY_AWS_CONFIG.txt and save all these values:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AWS CONFIGURATION SUMMARY                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚ AWS Account ID: ____________________________________________    â”‚
â”‚                                                                  â”‚
â”‚ IAM User: asha-triage-admin                                     â”‚
â”‚ Access Key ID: _____________________________________________    â”‚
â”‚ Secret Access Key: _________________________________________    â”‚
â”‚                                                                  â”‚
â”‚ Bedrock Knowledge Base ID: _________________________________    â”‚
â”‚ Bedrock Guardrail ID: ______________________________________    â”‚
â”‚ Bedrock Guardrail Version: _________________________________    â”‚
â”‚                                                                  â”‚
â”‚ Cognito User Pool ID: ______________________________________    â”‚
â”‚ Cognito Client ID: _________________________________________    â”‚
â”‚                                                                  â”‚
â”‚ API Endpoint: _______________________________________________   â”‚
â”‚                                                                  â”‚
â”‚ S3 Bucket (Knowledge Base): ________________________________    â”‚
â”‚                                                                  â”‚
â”‚ Test Users:                                                      â”‚
â”‚ - ASHA Worker: asha_worker_001 / ___________________________   â”‚
â”‚ - PHC Doctor: phc_doctor_001 / _____________________________   â”‚
â”‚                                                                  â”‚
â”‚ Region: us-east-1                                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

KEEP THIS FILE SECURE AND BACKED UP!

================================================================================
TROUBLESHOOTING
================================================================================

If you encounter errors:

1. "Access Denied" errors:
   - Check your IAM user has correct permissions
   - Verify AWS CLI is configured correctly
   - Run: aws sts get-caller-identity

2. "Model not found" errors:
   - Verify Bedrock model access is granted
   - Check you're in us-east-1 region
   - Wait a few minutes and try again

3. "Knowledge Base not found" errors:
   - Verify Knowledge Base ID is correct
   - Check Knowledge Base status is "Available"
   - Ensure documents are synced

4. Deployment fails:
   - Check you have sufficient AWS permissions
   - Verify all environment variables are set
   - Check CloudFormation console for detailed errors

5. API returns errors:
   - Check CloudWatch Logs for Lambda functions
   - Verify Cognito user pool is configured correctly
   - Ensure Knowledge Base has documents

For detailed troubleshooting, see: backend/DEPLOYMENT.md

================================================================================
NEXT STEPS
================================================================================

Now that your backend is deployed:

1. Update frontend to use your API endpoint
2. Test all features end-to-end
3. Add more medical protocol documents
4. Create more test users
5. Monitor costs in AWS Billing dashboard
6. Set up CloudWatch dashboards for monitoring

Congratulations! Your AI Triage Engine backend is now live on AWS! ğŸ‰

================================================================================
SUPPORT
================================================================================

For issues:
- Check backend/DEPLOYMENT.md for detailed troubleshooting
- Review CloudWatch Logs in AWS Console
- Check AWS Service Health Dashboard
- Review backend/README.md for architecture details

================================================================================
